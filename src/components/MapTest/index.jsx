import React, { Component } from 'react';
import {
  Map, TileLayer, Popup,
  CircleMarker, GeoJSON
} from 'react-leaflet';

import 'leaflet/dist/leaflet.css';



class MapTest extends Component {
  constructor(props) {
    super(props)
    this.state = {
      isLoaded: props.loaded ,
      lat: 60.10,
      lng: 21.00,
      zoom: 8,
      sodrajson: {"type":"GeometryCollection", "geometries": [
        {"type":"LineString","coordinates":[[20.8073747,60.0647341],[20.8078372,60.0634645],[20.8071828,60.0625543],[20.8017325,60.0611621],[20.7828927,60.0585919],[20.7815196,60.0542655],[20.7885268,60.0486064],[20.7910243,60.0369224],[20.8011559,60.0251313],[20.8041143,60.0253854],[20.8098636,60.0262196],[20.8235536,60.0255121],[20.823618,60.0306361],[20.8250786,60.0312659]]},
        {"type":"LineString","coordinates":[[20.8917824,59.9455971],[20.890304,59.9458556],[20.8904756,59.946221],[20.8924225,59.9465493],[20.8940318,59.9471027],[20.8953407,59.9476287],[20.8956583,59.9484142],[20.8948687,59.9493722],[20.8921864,59.9520702],[20.889942,59.9544151],[20.8889893,59.9558783],[20.8884099,59.9580634],[20.8881814,59.9612704],[20.8884528,59.9628746],[20.889633,59.9636839],[20.8915331,59.9641436],[20.901748,59.9645738],[20.9151901,59.9650936],[20.9269211,59.9653546],[20.9399633,59.9655577],[20.9485504,59.965891],[20.9570476,59.9664576],[20.9621996,59.966747],[20.9646136,59.9670654],[20.9678408,59.9676819],[20.9744198,59.9687579],[20.9769003,59.9690774],[20.9798596,59.9691349],[20.9916631,59.9687654],[20.9975704,59.9687198],[21.001377,59.9689652],[21.0167772,59.9704724],[21.0300305,59.9716766],[21.037883,59.9723499],[21.0443525,59.9724729],[21.0515333,59.9724299],[21.053516,59.9727826],[21.0546149,59.9733263],[21.0638607,59.9806079],[21.0683464,59.983613],[21.0712895,59.9852532],[21.0771815,59.9880561],[21.1244003,60.0290056],[21.1278614,60.0311162],[21.206846,60.0715985],[21.2203558,60.0781262],[21.2325513,60.0840671],[21.248917,60.0920378],[21.2640779,60.0992513],[21.2721632,60.1032297],[21.2826753,60.1083063],[21.2904913,60.1121275],[21.2993522,60.1161867],[21.3081992,60.1202512],[21.3181019,60.1246011],[21.3270884,60.1284578],[21.3397699,60.1339505],[21.3541691,60.1400914],[21.3708417,60.147187],[21.3813194,60.1516114],[21.3886708,60.1548936],[21.3979202,60.1586559],[21.4116445,60.1643305],[21.4210161,60.1683479],[21.4354357,60.1742678],[21.4408248,60.1763707],[21.4453277,60.1775739],[21.4580918,60.1796713],[21.4660118,60.1810019],[21.4702561,60.1817573],[21.4746271,60.1827699],[21.4810064,60.1851555],[21.4892397,60.1882589],[21.4937673,60.1898195],[21.4979043,60.1906302],[21.5104163,60.191347],[21.5184844,60.1916745],[21.527443,60.1930142],[21.5420342,60.1956049],[21.5460189,60.196088],[21.5485938,60.1956486],[21.5540441,60.193779],[21.5617602,60.19101],[21.5655168,60.1900032],[21.5711523,60.189235],[21.5789049,60.1883047],[21.581512,60.1876711],[21.5834108,60.1864102],[21.5841271,60.1858236],[21.584739,60.1853635],[21.5854149,60.1850835],[21.5865524,60.1846737]]},
        {"type":"LineString","coordinates":[[20.296726862031772,60.12112682319179],[20.296488762031775,60.12205072319179],[20.296921962031774,60.12271192319179],[20.297765562031774,60.12287152319179],[20.298677662031775,60.12264352319179],[20.302947162031774,60.12134412319179],[20.309169862031773,60.11958652319179],[20.314285462031773,60.11817952319179],[20.31977856203177,60.11740972319179],[20.323323362031772,60.11714452319179],[20.33368316203177,60.11698202319179],[20.343982862031773,60.11715312319179],[20.353939162031775,60.11792292319179],[20.363663862031775,60.11885522319179],[20.369500262031774,60.11876972319179],[20.378143462031773,60.11783742319179],[20.386151462031773,60.11628922319179],[20.394966262031772,60.11450142319179],[20.410759062031772,60.11048062319179],[20.422715362031774,60.10747762319179],[20.43129836203177,60.10619412319179],[20.437478162031773,60.10568072319179],[20.450520362031774,60.10505862319179],[20.455441962031774,60.105481623191785],[20.458557862031775,60.10615372319179],[20.461644462031774,60.107233323191785],[20.481762162031774,60.11750392319179],[20.501979762031773,60.119272823191785],[20.504941162031773,60.118705523191785],[20.506314462031774,60.11799992319179],[20.509428062031773,60.11535202319179],[20.509887362031773,60.11500622319179],[20.510855462031774,60.11503702319179]]},
        {"type":"LineString","coordinates":[[20.510855462031774,60.11316740288079],[20.51049196203177,60.11346660288079],[20.510389862031772,60.11372300288079],[20.510297062031775,60.11403430288079],[20.510274562031775,60.11450190288079],[20.510676362031774,60.11517330288079],[20.511592962031774,60.11574540288079],[20.522062262031774,60.11737440288079],[20.535268762031773,60.11790870288079],[20.585640762031773,60.12765500288079],[20.671999462031774,60.098418202880794],[20.690445962031774,60.09816730288079],[20.699261762031774,60.10124410288079],[20.701064262031775,60.102228102880794],[20.703124162031774,60.10475230288079],[20.703381662031774,60.10637800288079],[20.702351662031774,60.10783250288079],[20.697888562031775,60.10890190288079],[20.69099786203177,60.11015760288079],[20.682970462031772,60.11049400288079],[20.682541362031774,60.111724802880794]]},
        {"type":"LineString","coordinates":[[20.6823206,60.1100751],[20.6830227,60.1091831],[20.6909445,60.1090148],[20.7193995,60.1056333],[20.7488286,60.0950868],[20.7714318,60.069322],[20.778635,60.0671655],[20.783053,60.0658955],[20.7908806,60.0635231],[20.796163,60.0619653],[20.8001696,60.0618319],[20.8036457,60.062453],[20.8052336,60.0629242],[20.8064352,60.063738],[20.8073747,60.0647341]]},
        {"type":"LineString","coordinates":[[20.8250786,60.0312659],[20.824599,60.0305605],[20.8246414,60.0250325],[20.8138402,60.0254631],[20.8101373,60.0255895],[20.8047645,60.0243457],[20.7985139,60.0195368],[20.7982403,60.0105233],[20.8286244,59.9818526],[20.8893901,59.9633281],[20.8925478,59.9524114],[20.8971004,59.9487205],[20.8959632,59.947277],[20.8901231,59.9463403],[20.8899228,59.9457099],[20.8917824,59.9455971]]}
        ]}, 
      norrajson: {
        "type": "GeometryCollection", "geometries": [
          { "type": "LineString", "coordinates": [[21.0380781, 60.3565814], [21.0382179, 60.3553567], [21.0375569, 60.3546156], [21.0375128, 60.3521958], [21.0374247, 60.3506916], [21.0356178, 60.3480535], [21.0327973, 60.3442814], [21.0324888, 60.3435836], [21.0326651, 60.3390258], [21.0327091, 60.3352745], [21.0324888, 60.3344238], [21.0283902, 60.330432], [21.0273766, 60.3297557], [21.011379, 60.3204393], [21.0089551, 60.3187808], [21.0058702, 60.3181479], [21.00097, 60.3178095], [20.9959478, 60.3174626], [21.000977, 60.3174574], [21.0059969, 60.3174981], [21.0084704, 60.3170131], [21.0093077, 60.3162711], [21.0115553, 60.3108582], [21.0123926, 60.3088282], [21.0120841, 60.3081733], [21.0114231, 60.30706], [21.0092195, 60.305379], [21.0035345, 60.3011216], [20.9923405, 60.2929327], [20.9911947, 60.2922119], [20.9895641, 60.2916659], [20.9871843, 60.291513], [20.9816755, 60.2913383], [20.9735224, 60.2912509], [20.9703053, 60.2912073], [20.9617997, 60.2909233], [20.9577452, 60.290967], [20.9529856, 60.2911199], [20.9404255, 60.2918406], [20.9299367, 60.2918188], [20.901335, 60.2917314], [20.892565, 60.2916441], [20.8833983, 60.2914038], [20.8783302, 60.2911636], [20.8670481, 60.2901589], [20.8640954, 60.290006], [20.8625529, 60.2897657], [20.8477453, 60.2853534], [20.8467757, 60.2851786], [20.8254456, 60.2847635], [20.8234624, 60.2851349], [20.8227132, 60.2856155], [20.8020001, 60.2950947], [20.800678, 60.2954223], [20.7984745, 60.2954223], [20.7952573, 60.2952694], [20.7934063, 60.2947672], [20.7915213, 60.2932543], [20.7907349, 60.2914748], [20.7901287, 60.2904026], [20.7900959, 60.2915048], [20.7905234, 60.2933364], [20.7909943, 60.2964539], [20.7911361, 60.2988542], [20.7911137, 60.300018], [20.7898398, 60.3012264], [20.7768164, 60.307132], [20.7536839, 60.3173201], [20.7513513, 60.3183138], [20.7532177, 60.3170526], [20.7535002, 60.3157748], [20.7531392, 60.3143331], [20.7518576, 60.3130214], [20.7507718, 60.3124468], [20.7443818, 60.3089555], [20.7406149, 60.308118], [20.7362386, 60.3071507], [20.7341915, 60.3062021], [20.729194, 60.3021169], [20.7249325, 60.2987367], [20.7220025, 60.2970702], [20.7073801, 60.2914643], [20.6959614, 60.286911], [20.6851264, 60.2825724], [20.6744544, 60.2782402], [20.6636269, 60.2738691], [20.6546511, 60.2702029], [20.6512201, 60.269176], [20.6304683, 60.2648218], [20.612754, 60.2609731], [20.5953818, 60.2571799], [20.5784603, 60.2534389], [20.5655181, 60.2506334], [20.5502005, 60.2491236], [20.5301966, 60.2473464], [20.5190451, 60.2462964], [20.4646746, 60.2400221], [20.4491392, 60.2381075], [20.4469076, 60.2373187], [20.4246989, 60.2253099], [20.4220811, 60.2244318], [20.4192272, 60.224069], [20.4144713, 60.2240448], [20.4136621, 60.2242177]] }
        ]
      },
      tvarjson: {
        "type": "GeometryCollection", "geometries": [
          { "type": "LineString", "coordinates": [[20.5106347, 60.1115177], [20.5101382, 60.1116882], [20.5098807, 60.1119949], [20.5071566, 60.1147979], [20.5059956, 60.1175866], [20.5053358, 60.1193847], [20.5071983, 60.120962], [20.5120037, 60.1236348], [20.5175838, 60.1263994], [20.5225899, 60.1279191], [20.5300518, 60.1301329], [20.5340204, 60.1317669], [20.5390447, 60.134403], [20.548293, 60.1394888], [20.5562548, 60.1443089], [20.563452, 60.1486619], [20.5656812, 60.1499912], [20.5689985, 60.1516824], [20.5759399, 60.1531015], [20.585522, 60.1549544], [20.6047266, 60.1586207], [20.6089849, 60.1595512], [20.6129846, 60.1607347], [20.6311056, 60.1660636], [20.6504423, 60.1717131], [20.6679828, 60.1769587], [20.6755972, 60.1792722], [20.6917854, 60.18419], [20.694851, 60.1847959], [20.6981319, 60.1849405], [20.7143099, 60.1855689], [20.7301736, 60.1860495], [20.7439247, 60.1863584], [20.7472614, 60.1869035], [20.7501185, 60.1878487], [20.7509113, 60.1891752], [20.750008, 60.1905966], [20.7471455, 60.1929042], [20.7376977, 60.2006519], [20.7267135, 60.2096711], [20.7224552, 60.2133099], [20.7208995, 60.2148816], [20.720656, 60.2165162], [20.7216001, 60.2176779], [20.7233221, 60.2184645], [20.7260151, 60.2187986], [20.726748, 60.2191638]] },
          { "type": "LineString", "coordinates": [[20.5106347, 60.1115177], [20.5101845, 60.1117745], [20.5100264, 60.1120331], [20.5097988, 60.112387], [20.5095639, 60.1128965], [20.5099676, 60.1136507], [20.5109973, 60.1142934], [20.5218311, 60.1159739], [20.5349329, 60.1165649], [20.5854096, 60.1262996], [20.6719552, 60.0970062], [20.6901729, 60.096827], [20.6986709, 60.099792], [20.7003792, 60.1007245], [20.7023711, 60.1031654], [20.702613, 60.1046925], [20.7016955, 60.1059882], [20.6974641, 60.1070021], [20.6907213, 60.108339], [20.6826587, 60.1087314], [20.6823206, 60.1100751], [20.6831137, 60.109296], [20.6910002, 60.1091837], [20.7018892, 60.1085005], [20.7139054, 60.1100617], [20.7137338, 60.1116014], [20.7117597, 60.1147877], [20.6975118, 60.129885], [20.6958381, 60.1317658], [20.6957093, 60.1325096], [20.6970397, 60.1377922], [20.6954089, 60.1398221], [20.6872121, 60.149752], [20.6796161, 60.1588545], [20.6724063, 60.1675404], [20.6693593, 60.1712336], [20.6691447, 60.1721728], [20.6693593, 60.1734962], [20.6700889, 60.1751611], [20.6708184, 60.1761002], [20.6730071, 60.1779613], [20.6755972, 60.1792722], [20.6917854, 60.18419], [20.694851, 60.1847959], [20.6981319, 60.1849405], [20.7143099, 60.1855689], [20.7301736, 60.1860495], [20.7439247, 60.1863584], [20.7472614, 60.1869035], [20.7501185, 60.1878487], [20.7509113, 60.1891752], [20.750008, 60.1905966], [20.7471455, 60.1929042], [20.7376977, 60.2006519], [20.7267135, 60.2096711], [20.7224552, 60.2133099], [20.7208995, 60.2148816], [20.720656, 60.2165162], [20.7216001, 60.2176779], [20.7233221, 60.2184645], [20.7260151, 60.2187986], [20.726748, 60.2191638]] },
          { "type": "LineString", "coordinates": [[20.2965061, 60.1176075], [20.2956341, 60.1185749], [20.296196, 60.1194326], [20.2975799, 60.1196944], [20.2987628, 60.1193987], [20.3030459, 60.1180952], [20.3092566, 60.116341], [20.3143052, 60.1149524], [20.3196903, 60.1141978], [20.3231595, 60.1139383], [20.3334618, 60.1137766], [20.3437031, 60.1139467], [20.3536106, 60.1147128], [20.3633922, 60.1156505], [20.3693561, 60.1155631], [20.3781043, 60.1146195], [20.3861633, 60.1130615], [20.3950079, 60.1112676], [20.4108233, 60.1072412], [20.4227285, 60.104251], [20.4312204, 60.1029812], [20.4373422, 60.1024726], [20.4502828, 60.1017936], [20.4551155, 60.102209], [20.4581541, 60.102782], [20.4609665, 60.1038128], [20.4813698, 60.1141395], [20.5017707, 60.1159102], [20.5049971, 60.115412], [20.5065844, 60.1146791], [20.509544, 60.1119138], [20.5098779, 60.1116024], [20.5106347, 60.1115177], [20.5101382, 60.1116882], [20.5098807, 60.1119949], [20.5071566, 60.1147979], [20.5059956, 60.1175866], [20.5053358, 60.1193847], [20.5071983, 60.120962], [20.5120037, 60.1236348], [20.5175838, 60.1263994], [20.5225899, 60.1279191], [20.5300518, 60.1301329], [20.5340204, 60.1317669], [20.5390447, 60.134403], [20.548293, 60.1394888], [20.5562548, 60.1443089], [20.563452, 60.1486619], [20.5656812, 60.1499912], [20.5689985, 60.1516824], [20.5759399, 60.1531015], [20.585522, 60.1549544], [20.6047266, 60.1586207], [20.6089849, 60.1595512], [20.6129846, 60.1607347], [20.6311056, 60.1660636], [20.6504423, 60.1717131], [20.6679828, 60.1769587], [20.6755972, 60.1792722], [20.6917854, 60.18419], [20.694851, 60.1847959], [20.6981319, 60.1849405], [20.7143099, 60.1855689], [20.7301736, 60.1860495], [20.7439247, 60.1863584], [20.7472614, 60.1869035], [20.7501185, 60.1878487], [20.7509113, 60.1891752], [20.750008, 60.1905966], [20.7471455, 60.1929042], [20.7376977, 60.2006519], [20.7267135, 60.2096711], [20.7224552, 60.2133099], [20.7208995, 60.2148816], [20.720656, 60.2165162], [20.7216001, 60.2176779], [20.7233221, 60.2184645], [20.7260151, 60.2187986], [20.726748, 60.2191638]] }
        ]
      },
      
      // husö -långnäs 
      highlightjson: { "type": "GeometryCollection", "geometries": [{ "type": "MultiLineString", "coordinates": [[[20.2965061, 60.1176075, 0], [20.296268, 60.1185314, 0], [20.2967012, 60.1191926, 0], [20.2975448, 60.1193522, 0], [20.2984569, 60.1191242, 0], [20.3027264, 60.1178248, 0], [20.3089491, 60.1160672, 0], [20.3140647, 60.1146602, 0], [20.3195578, 60.1138904, 0], [20.3231026, 60.1136252, 0], [20.3334624, 60.1134627, 0], [20.3437621, 60.1136338, 0], [20.3537184, 60.1144036, 0], [20.3634431, 60.1153359, 0], [20.3692795, 60.1152504, 0], [20.3779227, 60.1143181, 0], [20.3859307, 60.1127699, 0], [20.3947455, 60.1109821, 0], [20.4105383, 60.1069613, 0], [20.4224946, 60.1039583, 0], [20.4310776, 60.1026748, 0], [20.4372574, 60.1021614, 0], [20.4502996, 60.1015393, 0], [20.4552212, 60.1019623, 0], [20.4583371, 60.1026344, 0], [20.4614237, 60.103714, 0], [20.4815414, 60.1139846, 0], [20.501759, 60.1157535, 0], [20.5047204, 60.1151862, 0], [20.5060937, 60.1144806, 0], [20.5092073, 60.1118327, 0], [20.5096666, 60.1114869, 0], [20.5106347, 60.1115177, 0]]] }, { "type": "MultiLineString", "coordinates": [[[20.5106347, 60.1115177, 0], [20.5102712, 60.1118169, 0], [20.5101691, 60.1120733, 0], [20.5100763, 60.1123846, 0], [20.5100538, 60.1128522, 0], [20.5104556, 60.1135236, 0], [20.5113722, 60.1140957, 0], [20.5218415, 60.1157247, 0], [20.535048, 60.116259, 0], [20.58542, 60.1260053, 0], [20.6717787, 60.0967685, 0], [20.6902252, 60.0965176, 0], [20.699041, 60.0995944, 0], [20.7008435, 60.1005784, 0], [20.7029034, 60.1031026, 0], [20.7031609, 60.1047283, 0], [20.7021309, 60.1061828, 0], [20.6976678, 60.1072522, 0], [20.6907771, 60.1085079, 0], [20.6827497, 60.1088443, 0], [20.6823206, 60.1100751, 0]]] }, { "type": "MultiLineString", "coordinates": [[[20.6823206, 60.1100751, 0], [20.6830227, 60.1091831, 0], [20.6909445, 60.1090148, 0], [20.7193995, 60.1056333, 0], [20.7488286, 60.0950868, 0], [20.7714318, 60.069322, 0], [20.778635, 60.0671655, 0], [20.783053, 60.0658955, 0], [20.7908806, 60.0635231, 0], [20.796163, 60.0619653, 0], [20.8001696, 60.0618319, 0], [20.8036457, 60.062453, 0], [20.8052336, 60.0629242, 0], [20.8064352, 60.063738, 0], [20.8073747, 60.0647341, 0]]] }] },
      sodrastyle: {
        color: "red",
        linejoin: "round",
        weight: 4,
        opacity: 0.4
      },
      tvarstyle: {
        color: "blue",
        linejoin: "round",
        weight: 4,
        opacity: 0.4
      },
      norrastyle: {
        color: "orange",
        linejoin: "round",
        weight: 4,
        opacity: 0.4
      },
      highlightstyle: {
        color: "yellow",
        linejoin: "round",
        weight: 4,
        opacity: 0.7
      }
    }
  }

static getDerivedStateFromProps(props, state) {
  if(props.loaded !== state.isLoaded ){
    return {
      isLoaded: props.loaded
    }
  }
  return null
} 




  render() {
    const position = [this.state.lat, this.state.lng];
    console.log("state:", this.state)
    return (
      <div className="map-container">
        <Map center={position} zoom={this.state.zoom}>
          <TileLayer
            attribution='&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            url='http://{s}.tile.osm.org/{z}/{x}/{y}.png'
          />


          <CircleMarker center={[60.21916, 20.72675]} color="black" radius={5}>
            <Popup>Snäckö</Popup>
          </CircleMarker>

          <CircleMarker center={[60.11003, 20.68214]} color="black" radius={5}>
            <Popup>Sottunga</Popup>
          </CircleMarker>

          <CircleMarker center={[60.11145, 20.51089]} color="black" radius={5}>
            <Popup>Överö</Popup>
          </CircleMarker>

          <CircleMarker center={[60.11763, 20.29668]} color="black" radius={5}>
            <Popup>Långnäs</Popup>
          </CircleMarker>

          <CircleMarker center={[60.1626921, 20.3927480]} color="black" radius={5}>
            <Popup>Bergö</Popup>
          </CircleMarker>

          <CircleMarker center={[60.1854808, 21.5858297]} color="black" radius={5}>
            <Popup>Galtby</Popup>
          </CircleMarker>

          <CircleMarker center={[59.9455971, 20.8917824]} color="black" radius={5}>
            <Popup>Kökar</Popup>
          </CircleMarker>

          <CircleMarker center={[60.0313030, 20.8251714]} color="black" radius={5}>
            <Popup>Kyrkogårdsö</Popup>
          </CircleMarker>

          <CircleMarker center={[60.0647341, 20.8073747]} color="black" radius={5}>
            <Popup>Husö</Popup>
          </CircleMarker>

          <CircleMarker center={[60.0317802, 20.3858259]} color="black" radius={5}>
            <Popup>Degerby</Popup>
          </CircleMarker>

          <CircleMarker center={[60.0665811, 20.2675505]} color="black" radius={5}>
            <Popup>Svinö</Popup>
          </CircleMarker>

          <CircleMarker center={[60.2242177, 20.4136621]} color="black" radius={5}>
            <Popup>Hummelvik</Popup>
          </CircleMarker>

          <CircleMarker center={[60.3183138, 20.7513513]} color="black" radius={5}>
            <Popup>Enklinge</Popup>
          </CircleMarker>

          <CircleMarker center={[60.2904026, 20.7901287]} color="black" radius={5}>
            <Popup>Kumlinge</Popup>
          </CircleMarker>

          <CircleMarker center={[60.3174626, 20.9959478]} color="black" radius={5}>
            <Popup>Lappo</Popup>
          </CircleMarker>

          <CircleMarker center={[60.3568842, 21.0388434]} color="black" radius={5}>
            <Popup>Torsholma</Popup>
          </CircleMarker>

          <GeoJSON data={this.state.sodrajson} style={this.state.sodrastyle}></GeoJSON>
          <GeoJSON data={this.state.tvarjson} style={this.state.tvarstyle}></GeoJSON>
          <GeoJSON data={this.state.norrajson} style={this.state.norrastyle}></GeoJSON>

        
        </Map>
      </div>
    )
  }
}

export default MapTest
